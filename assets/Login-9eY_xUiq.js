import{d as p,f as _,r as f,c as v,b as i,a as o,w as c,v as r,t as h,l as b,u as y,q as w,o as x,p as k,R as S}from"./index-DxgBdj5n.js";import{a as d}from"./axios-L6U4YIEh.js";import{d as T,_ as F}from"./Navbar.vue_vue_type_style_index_0_scope_true_lang-Ajr30bIh.js";const I={class:"bg-black"},B={class:"d-flex loginStyle"},D=o("div",{class:"plotStyle"},null,-1),C={class:"d-flex justify-content-center align-items-center loginFormBlock"},L=o("div",{class:"loginBgImg"},null,-1),V={class:"loginFormSzie"},$=o("div",{class:"loginTextStyle loginSmallTitle mb-2",style:{color:"#BF9D7D"}},[o("span",null,"享樂酒店，誠摯歡迎")],-1),E=o("div",{class:"loginTextStyle loginTitle mb-5"},"立即開始旅程",-1),M={class:"mb-3"},N=o("label",{for:"email",class:"form-label"},"電子信箱",-1),P={class:"mb-3"},R=o("label",{for:"inputPassward",class:"form-label"},"密碼",-1),U=o("div",{class:"d-flex justify-content-between mb-4"},null,-1),j={class:"row"},q={class:"col-6"},z={class:"col-6"},G={class:"text-danger"},W={class:"mt-1"},A=o("span",null,"沒有會員嗎?",-1),Q=p({__name:"Login",setup(H){let a={};const e=_({email:"",password:""}),n=f(""),m=async()=>{try{w({clientId:"771037620608-aap4bl0pqg9ar5die31led536vcldotu.apps.googleusercontent.com"}).then(async l=>{a=l,console.log(a,"clientIDdata"),await d.post("https://practice-ts-mongdb.onrender.com/api/v1/user/googleLogin",{token:l.access_token}).then(s=>{console.log(s,"mongoDB")})})}catch(l){console.log(l)}},g=async()=>{const l=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(e.email.toLowerCase().match(l)===null){n.value="Email有缺失";return}if(e.password===""){n.value="密碼有缺失";return}n.value="",await d.post("https://practice-ts-mongdb.onrender.com/api/v1/user/login",{email:e.email,password:e.password}).then(t=>{if(t.data.status){console.log(t),window.confirm("登入成功");const u={name:t.data.result.name,status:t.data.status,token:t.data.token};T.transferMegFinishMeg$(u)}console.log(t,"res")}).catch(t=>{n.value="帳號或密碼有誤,20秒後此行消失",console.error(t,"err")}),setTimeout(()=>{n.value=""},2e4)};return(l,s)=>(x(),v("div",I,[i(F),o("div",B,[D,o("div",C,[L,o("div",V,[$,E,o("div",M,[N,c(o("input",{type:"text",class:"form-control loginTextStyle loginFormInput",id:"email","onUpdate:modelValue":s[0]||(s[0]=t=>e.email=t)},null,512),[[r,e.email]])]),o("div",P,[R,c(o("input",{type:"password",class:"form-control loginTextStyle loginFormInput",id:"inputPassward","onUpdate:modelValue":s[1]||(s[1]=t=>e.password=t)},null,512),[[r,e.password]])]),U,o("div",j,[o("div",q,[o("button",{type:"submit",class:"mb-1 form-control btn loginTextStyle loginFormInput loginFormButton",onClick:s[2]||(s[2]=t=>g())},"會員登入")]),o("div",z,[o("button",{type:"submit",class:"mb-1 form-control btn loginTextStyle btn-primary login_google",onClick:s[3]||(s[3]=t=>m())},"Google登入")])]),o("p",G,h(n.value),1),o("div",W,[A,i(y(S),{to:"/signup",class:"ms-3 loginForgetPW loginTextStyle"},{default:b(()=>[k("前往註冊")]),_:1})])])])])]))}});export{Q as default};
